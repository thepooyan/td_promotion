"use strict";$(document).ready(function(){function o(){dc.id("paymentStatus")&&callModal.custom("notification",function(n){var t=dc.id("paymentStatus").outerHTML;n(t)})}var r,u,n,t,f,i,e;if(o(),$(".classType").change(function(){var i=$(this).val(),t=$(this).parent().parent().find("a"),n=t.attr("href");n=n.split("classParticipationType")[0];n+="classParticipationType="+i;t.attr("href",n)}),$("[id^=btnRegister]").click(function(){var r=window.location.search.toLowerCase().includes("test=true"),n=$(this).attr("data-id"),t="#btnRegister-"+n,i="#btnCancel-"+n;r||$.ajax({type:"GET",url:"/Courses/RegisterCourse",data:{TCourseID:n},dataType:"JSON",success:function(n){n=="ok"?($(t).removeClass("d-flex"),$(t).addClass("d-none"),$(i).addClass("d-flex"),$(i).removeClass("d-none"),window.location.href="/UserPanel/Courses?cate=myCourse"):$.get("/CNTDL/DownloadFileModal",null,function(){n=="کاربر قبلا در این دوره ثبت نام کرده است."&&callModal.fail(n);n!="کاربر قبلا در این دوره ثبت نام کرده است."&&(window.location.href="/UserPanel/Profile?cate=editProfile")})},error:function(n,t){console.log(t);console.log(n);callModal.fail(n)}})}),$("[id^=btnCancel]").click(function(n){n.preventDefault();var t=$(this).attr("data-id");$.ajax({type:"Post",url:"/Courses/CancelRegistration",data:{TCourseID:t},success:function(n){callModal.confirm("آیا از انصراف از دوره مطمئن هستید؟").then(function(){$.get("/CNTDL/DownloadFileModal",null,function(){callModal.success(n);location.reload()})})},error:function(n){callModal.fail(n)}})}),r=dc.queries(".courseVideso"),r.forEach(function(n){var i=n.querySelector(".playButton"),r=n.querySelector("video"),f=n.querySelector(".wrap"),e=n.querySelector(".imgMain"),t="done",u=function(){t==="done"&&(i.classList.contains("playing")?(t="running...",setTimeout(function(){i.classList.remove("playing")},600),setTimeout(function(){t="done"},2e3),r.pause()):(t="running...",setTimeout(function(){i.classList.add("playing")},500),setTimeout(function(){r.play();t="done"},2e3)),f.classList.toggle("play"))};i.onclick=u;e.onclick=u}),u=function(n){return n.getBoundingClientRect().top-window.innerHeight<0},n=dc.id("scrollProgress"),n&&function(){var i=n.queries("#scrollProgress a"),t=0;i.forEach(function(n){var f=n.getAttribute("href").substr(1),r=dc.id(f),i;if(n.addEventListener("click",function(n){n.preventDefault();r.scrollIntoView()}),i=n.previousElementSibling,!r){n.parentElement.firstElementChild===n&&n.nextElementSibling.remove();n.remove();i&&i.remove();return}t++;window.addEventListener("scroll",function(){u(r)?(i&&i.classList.add("active"),n.classList.add("active")):(i&&i.classList.remove("active"),n.classList.remove("active"))})});t<1?n.remove():(window.addEventListener("scroll",function(){n.getBoundingClientRect().top?n.classList.remove("stick"):n.classList.add("stick")}),n.classList.add("loaded"))}(),t=document.querySelectorAll(".courseVideo"),t.length>0&&t.forEach(function(n){var t=n.querySelector("video");n.onclick=function(){n.classList.add("active");t.controls=!0;t.play()};t.onended=function(){n.classList.remove("active");t.controls=!1}}),f=dc.queries(".dynamicScroll"),f.forEach(function(n){n.style.setProperty("--scrollHeight",n.scrollHeight+"px")}),$(".overlay").length>0){$(".overlay").click(function(){$(this).removeClass("overlay");$(this).find("video").attr("controls",!0);$(this).find("video")[0].play()});$(".overlay").find("video").on("ended",function(){$(this).attr("controls",!1);$(this).parents(".road-map-video").addClass("overlay")})}$("[class*='station']")&&$("[class*='station']").click(function(n){var t,i;n.stopPropagation?n.stopPropagation():n.cancelBubble=!0;t=$(this).parents(".road-map-overview").children(".road-map-description");$(this).data("id")&&(i='{"id" : '+$(this).data("id")+"}",$.get("url",i,function(n,i){i=="success"&&$(window).width()<698&&$("html , body").animate({scrollTop:t.offset().top},100)}))});$(".prerequisite")&&$(".prerequisite").click(function(n){var t,i;n.stopPropagation?n.stopPropagation():n.cancelBubble=!0;t=$(this).parents(".road-map-overview").children(".road-map-description");$(this).data("id")&&(i='{"id" : '+$(this).data("id")+"}",$.get("url",i,function(n,i){i=="success"&&$(window).width()<698&&$("html , body").animate({scrollTop:t.offset().top},100)}))});$(window).width()<698&&$(".road-map-stations")&&$(".road-map-stations").each(function(){var n=$(this).find("[class*='station']").length+7,t=n*21;$(this).css("height",t+"vw")});i=dc.queries("[data-sendto]");i.length>0&&i.forEach(function(n){n.addEventListener("click",function(){var n=this.dataset.sendto,t={category:this.dataset.mydata},i=dc.query("#content-of-category");fetch(n,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)}).then(function(n){return n.text()}).then(function(n){i.innerHTML=n})["catch"](function(n){console.log("Error",n)})})});e=document.querySelectorAll(".videoAndQuestion .sample-video , .videoGridContainer .sample-video");e.forEach(function(n){function i(n){n.stopPropagation();this.classList.add("play");t.play();t.controls=!0;this.removeEventListener("click",i)}var t=n.querySelector("video");t.controls=!1;n&&(n.addEventListener("click",i),t.addEventListener("ended",function(){n.classList.remove("play");n.addEventListener("click",i);this.controls=!1}))})});