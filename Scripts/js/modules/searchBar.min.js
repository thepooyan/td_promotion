"use strict";$(function(){var n=document.getElementById("search");n&&function(){var s=function(n){clearTimeout(u);n.target.value.length>2&&n.target.value!==r&&(u=setTimeout(function(){h(n.target.value).then(c)},500));n.key==="Enter"&&f(n.target.value)},f=function(n){if(n)if(t){if(t.searchText===n){var r=t.map(function(n){return n.Type});i(r,r[0],t.searchText);location.href="/search"}}else i(null,null,n),location.href="/search"},h=function(t){return r=t,n.classList.add("loading"),new Promise(function(i,u){var f={searchText:t};$.get("/Home/HomeSearch",f,function(f){f.searchText=t;r===t?(i(f),n.classList.remove("loading")):u()})})},c=function(n){if(n.length<=1)return l(n);t=n;var r=document.createDocumentFragment();n.forEach(function(t){var u=document.createElement("a");u.href=t.Href;u.innerHTML="نتایج برای "+t.searchText+" در دسته <span>"+t.CategoryName+"<\/span>";u.dataset.icon=t.Icon;u.dataset.type=t.Type;u.onclick=function(){var r=n.map(function(n){return n.Type});i(r,t.Type,t.searchText)};r.appendChild(u)});a(o,r)},l=function(n){var t=document.createElement("span");t.innerText="متاسفانه نتیجه ای برای "+n.searchText+" یافت نشد! :/";o.replaceChildren(t)},a=function(n,t){n.childElementCount>0?n.replaceChildren(t):n.appendChild(t)},i=function(n,t,i){localStorage.setItem("activeCategories",n);localStorage.setItem("type",t);localStorage.setItem("searchText",i)},e=n.querySelector("input"),o=n.querySelector("ul"),v=n.querySelector("img"),r=undefined,t=undefined,u;e.onkeyup=s;v.onclick=function(){return f(e.value)};u=undefined}()});