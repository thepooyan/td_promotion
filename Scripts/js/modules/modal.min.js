"use strict";(function(){function e(){function t(){n=document.documentElement.scrollTop;document.body.classList.add("locked");document.body.style.top=-n+"px";document.documentElement.style.scrollBehavior="initial"}function i(){document.body.classList.remove("locked");document.body.style.top=null;document.documentElement.scrollTop=n;document.documentElement.style.scrollBehavior=null}var n=undefined;return{lock:t,unlock:i}}function t(n,t){var r=arguments.length<=2||arguments[2]===undefined?!1:arguments[2];return i(t,function(t){t(n)},{scrollLock:r})}function i(t,i){var e=arguments.length<=2||arguments[2]===undefined?{}:arguments[2],f=e.close,u=e.scrollLock;return f||(f="overlay"),u||(u=!1),i||typeof t!="function"||(i=t,t=undefined),new Promise(function(e){function o(){return new Promise(function(t){n.classList.contains("active")&&(n.addEventListener("transitionend",function(){t();e();u&&r.unlock()},{once:!0}),n.classList.remove("active"))})}function s(t){typeof t=="string"?n.content.innerHTML=t:n.content.replaceChildren(t);n.classList.add("active");var i=document.querySelector("#closeModal");i&&(i.onclick=o);u&&r.lock()}n.className="";t&&(n.className=t);switch(f){case"all":n.onclick=o;break;case"overlay":n.onclick=function(t){n.content.contains(t.target)||o()};break;case"locked":n.onclick=null}i(s,o)})}function o(n,t){function u(n){return n?n.offsetTop+u(n.offsetParent):0}var r;if(n){var f=u(n)-window.innerHeight/2+n.clientHeight/2,i=Math.floor(f),o=document.documentElement.scrollHeight,e=o-window.innerHeight;i<0&&(i=0);i>e&&(i=e);r=function r(){var n=Math.floor(window.pageYOffset);(n===i||n+1===i||n-1===i)&&(window.removeEventListener("scroll",r),t())};window.addEventListener("scroll",r);window.scrollTo({top:f,behavior:"smooth"});r()}}function u(n,t){var r=arguments.length<=2||arguments[2]===undefined?5e3:arguments[2];return i("notification "+t,function(t,i){t(n);setTimeout(i,r)},{close:"all"})}function f(n,t,i){t===undefined&&(t=5e3);var r=document.createElement("div"),f=document.createElement("i"),e=document.createElement("br");return f.className=i?"fas fa-times":"fas fa-check-circle",r.innerText=n,r.appendChild(e),r.appendChild(f),u(r,t)}function s(n){return new Promise(function(t,r){i("choice",function(i,u){var f=document.createElement("div"),e=document.createElement("button"),o=document.createElement("button"),s=document.createElement("span");s.innerText=n;e.innerText="بله";e.onclick=function(){u().then(t)};e.className="button";o.innerText="خیر";o.onclick=function(){u().then(r)};o.className="button reverse";f.appendChild(s);f.appendChild(e);f.appendChild(o);i(f)}).then(r)})}function h(n){return i("spinner",function(t,i){var r=document.createElement("div"),u=document.createElement("div"),f;u.classList.add("loader");r.appendChild(u);f=document.createTextNode("لطفا صبر کنید...");r.appendChild(f);t(r);n&&n(i)},{close:"locked"})}function c(n){return i("spinner alt",function(t,i){var r=document.createDocumentFragment(),f=document.createElement("img");f.src="/Content/images/Logo/HoloG.png";var u=document.createElement("div"),o=document.createElement("span"),e=document.createElement("p");e.innerText="در حال بارگذاری ...";u.appendChild(o);u.appendChild(e);r.appendChild(f);r.appendChild(u);t(r);n&&n(i)},{close:"locked"})}function l(n){var r=arguments.length<=1||arguments[1]===undefined?{zoom:!1}:arguments[1],t=r.zoom,u="image "+(t?" zoom":""),f=t?{close:"all"}:undefined;return i(u,function(t){var i=document.createElement("img");i.src=n;t(i)},f)}function a(t,r){return new Promise(function(u){i("guide",function(i,u){var s=document.createDocumentFragment(),h=document.createTextNode(t),f=document.createElement("img"),e;f.src="/Content/images/img/swirlyArrow.png";e=document.createElement("button");e.innerText="باشه!";e.onclick=u;s.appendChild(h);s.appendChild(e);o(r,function(){var t=r.getBoundingClientRect();if(window.innerWidth>830){var u=t.left+r.offsetWidth/2,e=window.innerWidth/3,o=Math.floor(u/e)+1;f.style.top=t.top+r.offsetHeight/2-30+"px";switch(o){case 1:f.style.left=t.right+"px";f.classList.add("flip");break;case 2:f.style.right=window.innerWidth-t.left+"px";n.classList.add("left");break;case 3:f.style.right=window.innerWidth-t.left+"px"}1100>=window.innerWidth&&o===2&&(f.style.right=null,f.style.left=t.right+"px",f.classList.add("flip"),n.classList.add("left"))}else{var u=t.top+r.offsetHeight/2,e=window.innerHeight/3,h=Math.floor(u/e)+1;f.style.right=window.innerWidth-r.getBoundingClientRect().right+r.offsetWidth/2-60+"px";switch(h){case 1:f.style.bottom=t.top-20+"px";n.classList.add("bottom");f.classList.add("toBottom");break;case 2:case 3:f.style.top=t.bottom+20+"px";n.classList.add("top");f.classList.add("toTop")}}i(s);n.appendChild(f)})},{scrollLock:!0}).then(function(){n.querySelector("img").remove();u()})})}function v(n,t){return i("image photoVeiw",function(i,r){function h(t){f.style.left="-"+(n.length-t-1)*100+"vw";n.forEach(function(n){return n.classList.remove("showing")});n[t].classList.add("showing")}var e=document.createDocumentFragment(),f=document.createElement("div"),u=undefined,o,s;f.classList.add("cont");f.onclick=r;n.forEach(function(n,i){var e=document.createElement("div"),r=document.createElement("img");r.src=n.getAttribute("src");r.src===t.src&&(r.classList.add("active"),u=i,h(u));e.appendChild(r);f.appendChild(e)});o=document.createElement("i");o.className="fas fa-chevron-right";s=document.createElement("i");s.className="fas fa-chevron-left";o.onclick=function(){u--;u<0&&(u=0);h(u)};s.onclick=function(){u++;u>n.length-1&&(u=n.length-1);h(u)};e.appendChild(o);e.appendChild(f);e.appendChild(s);i(e)},{scrollLock:!0}).then(function(){n.forEach(function(n){return n.classList.remove("showing")})})}function y(n){var t=undefined;return i("lockedVideo",function(i){var r=document.createElement("canvas");r.classList.add("video");r.id=n;i(r);t=new CanvasVideo(n)},{scrollLock:!0}).then(function(){t.kill()})}var n=dc.query("#modal"),r;n.content=n.query(".content");r=e();t.notif=u;t.success=function(n,t){return f(n,t,!1)};t.fail=function(n,t){return f(n,t,!0)};t.confirm=s;t.custom=i;t.spinner=function(n){var t=arguments.length<=1||arguments[1]===undefined?!1:arguments[1];t?c(n):h(n)};t.image=l;t.photoVeiwer=v;t.guide=a;t.lockedVideo=y;window.callModal=t})();